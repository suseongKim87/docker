# 베이스 만들기
docker의 이미지를 만들기 위해서 최소한의 os image를 다운로드 받아야 합니다. (centos, ubuntu etc...)  
예제에서는 centos를 기반으로 하고 있기 때문에 centos 7 을 기반으로 하도록 하겠습니다.  
사실 centos에서 docker project를 하기위해서 버전업 까지 하게되었습니다... linux 서버 설치 관련해서는 다음에 작성하도록 하겠습니다.  

## 1. centOS 7 이미지 다운로드
먼저 centos 7의 기본이 되는 docker hadoop base image를 만들기 위해서는 먼저 centos image를 다운 받아야 합니다.  
```{.text}
docker hub에 있는 centos 관련 이미지를 확인해 볼 수 있습니다.
$ docker search centos
NAME                               DESCRIPTION                                     STARS               OFFICIAL            AUTOMATED
centos                             The official build of CentOS.                   5133                [OK]
ansible/centos7-ansible            Ansible on Centos7                              119                                     [OK]
...
```
아래와 같이 다운로드를 할 경우, CentOS의 offcial image를 다운로드 합니다.  
```{.text}
$ docker pull centos
```

## 2. yum update 및 필수 라이브러리 Install
centOS를 설치하고 yum을 최신 버전으로 업데이트 하고, 설치에 필요한 package를 install 합니다.  
```{text}
$ yum update
yum install -y curl openssh-server openssh-clients rsync wget net-tools rdate
```

## 3. open-jdk 설치 
open-jdk는 oracle-jdk의 유료화로 요즘 많은 개발자들이 옮겨가고 있는 추세입니다.  
우리는 지금까지 jdk를 돈내고 쓴적이 없고, open-jdk가 상용화에 문제가 없으니, jdk는 open-jdk로 진행하였습니다.  
```{text}
yum install -y java-1.8.0-openjdk-devel.x86_64
```

## 4. hadoop, zookeeper 설치
설치에 필요한 파일들은 다운로드 받기 위해서 wget을 설치 했으니, 명령어를 통해 다운로드를 해보도록 하겠습니다.  
```{text}
$ wget http://mirror.apache-kr.org/zookeeper/zookeeper-3.4.13/zookeeper-3.4.13.tar.gz
$ wget http://apache.tt.co.kr/hadoop/common/hadoop-3.1.1/hadoop-3.1.1.tar.gz
```

#### 4. 환경설정 잡기
